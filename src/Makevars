CXX_STD = CXX17

# Optimization flags
PKG_CXXFLAGS = -O3 -march=native -mtune=native -ffast-math

# Check whether OpenMP is available
OPENMP_CXXFLAGS = -fopenmp
OPENMP_LIBS = -fopenmp

# Test compiler support for OpenMP (silently skip if not available)
ifeq ($(shell $(CXX) $(OPENMP_CXXFLAGS) -dM -E - < /dev/null > /dev/null 2>&1 && echo YES), YES)
  PKG_CXXFLAGS += $(OPENMP_CXXFLAGS)
  PKG_LIBS += $(OPENMP_LIBS)
  CXXFLAGS += -DHAS_OPENMP
endif